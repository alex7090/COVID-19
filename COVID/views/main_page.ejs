<head>
    <title>COVID</title>
</head>
<style>
    #info {
        display: none;
        top: 100px;
        left: 50%;
        position: absolute;
    }

    #mydiv {
        top: 200px;
        left: 100px;
        position: absolute;
        z-index: 9;
        background-color: #f1f1f1;
        text-align: center;
        border: 1px solid #d3d3d3;
    }

    #mydivheader {
        padding: 10px;
        cursor: move;
        z-index: 10;
        background-color: rgb(175, 63, 63);
        color: #fff;
    }

    #mydiv2 {
        top: 200px;
        left: 300px;
        position: absolute;
        z-index: 9;
        background-color: #f1f1f1;
        text-align: center;
        border: 1px solid #d3d3d3;
    }

    #mydiv2header {
        padding: 10px;
        cursor: move;
        z-index: 10;
        background-color: rgb(0, 0, 0);
        color: #fff;
    }

    #mydiv3 {
        top: 200px;
        left: 500px;
        position: absolute;
        z-index: 9;
        background-color: #f1f1f1;
        text-align: center;
        border: 1px solid #d3d3d3;
    }

    #mydiv3header {
        padding: 10px;
        cursor: move;
        z-index: 10;
        background-color: rgb(2, 255, 23);
        color: #fff;
    }

    #mydiv4 {
        top: 200px;
        left: 700px;
        position: absolute;
        z-index: 9;
        background-color: #f1f1f1;
        text-align: center;
        border: 1px solid #d3d3d3;
    }

    #mydiv4header {
        padding: 10px;
        cursor: move;
        z-index: 10;
        background-color: rgb(255, 187, 0);
        color: #fff;
    }
</style>

<body>
    <p id='demo'></p>

    <div id="info"></div>

    <div class="row">
        <div id="mydiv">
            <div id="mydivheader">CONFIRMED CASES</div>
            <p id="conf"><%- confirmed %></p>
        </div>

        <div id="mydiv2">
            <div id="mydiv2header">DEATHS</div>
            <p><%- deaths %></p>
        </div>

        <div id="mydiv3">
            <div id="mydiv3header">RECOVERIES</div>
            <p><%- recovered %></p>
        </div>

        <div id="mydiv4">
            <div id="mydiv4header">ACTIVE CASES</div>
            <p><%- active %></p>
        </div>
    </div>
    <script>
        var tmp = "";
        var test = "";
        parse();
        function parse() {
            tmp = '<%- JSON.stringify(data) %>';
            test = JSON.parse(tmp);
            console.log(test[0][0].Country);
            var txt = "";
            txt += "<table border='1'>";
            txt += "<tr><td>DEV-ID</td><td>Country</td><td>Death</td><td>Cases</td><td>Recovered</td><td>Active</td></tr>";
            for (x in test[0]) {
                txt += "<tr id='" + x + "' onclick='getInfo(this.id)'><td>" + x + "</td><td>" + test[0][x].Country + "</td><td>" + test[0][x].TotalDeaths + "</td><td>" + test[0][x].TotalCases + "</td><td>" + test[0][x].TotalRecovered + "</td><td>" + test[0][x].ActiveCases + "</td></tr>";
            }
            txt += "</table>"
            document.getElementById("demo").innerHTML = txt;
        }

        //Make the DIV element draggagle:
        dragElement(document.getElementById("mydiv"));
        dragElement(document.getElementById("mydiv2"));
        dragElement(document.getElementById("mydiv3"));
        dragElement(document.getElementById("mydiv4"));

        function dragElement(elmnt) {
            var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            if (document.getElementById(elmnt.id + "header")) {
                document.getElementById(elmnt.id + "header").onmousedown = dragMouseDown;
            } else {
                elmnt.onmousedown = dragMouseDown;
            }

            function dragMouseDown(e) {
                e = e || window.event;
                e.preventDefault();
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
            }

            function elementDrag(e) {
                e = e || window.event;
                e.preventDefault();
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
                elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
                console.log(elmnt);
            }

            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }
        function getInfo(listX) {
            console.log(listX);
            var x = document.getElementById("info");
            if (x.style.display === "block") {
                x.style.display = "none";
            } else {
                x.style.display = "block";
            }
            x.innerHTML = test[0][listX].Country + " has a total of <strong>" +test[0][listX].ActiveCases + "</strong> active cases.<br>Overall, <strong>" + test[0][listX].TotalCases + "</strong> people were affected by the COVID-19 virus<br>";
            x.innerHTML += "<strong>" + test[0][listX].TotalDeaths + "</strong> people died, <strong>" + test[0][listX].TotalRecovered + "</strong> fully recovered, and <strong>" + test[0][listX].Serious_Critical + "</strong> are in a critical state<br>"
            x.innerHTML += "In the last 24 hours, <strong>" + test[0][listX].NewCases + "</strong> people got sick, and <strong>" + test[0][listX].NewDeaths + "</strong> died";
        }

    </script>
    <!-- Content -->

    <!-- Footer -->
    <!-- <footer class="page-footer font-small grey">
        <div class="footer-copyright text-center py-3">Â© 2020 Copyright:
            <a href="https://elliotdeutsch.wixsite.com/cleantown-landingpg"> CleanTown</a>
        </div>
    </footer> -->
    <!-- Footer -->

</body>